# Журнал освоения фреймворка [Spec Kit](https://github.com/github/spec-kit)

## План освоения

- ☑ Создание конституции проекта
- ☑ Создание изолированного первого изменения в проекте через исполнение всех шагов последовательно
- ☑ Модернизация конституции проекта с учетом недостатков выявленных при создании первого изменения
- ☑ Создание изолированной второго изменения в проекте через исполнение всех шагов последовательно
- ☑ Модернизация конституции проекта с учетом недостатков выявленных при создании второго изменения
- ☐ Модернизация первого и второго изменений одновременно
- ☐ Подведение итогов

Версия:

- Spec Kit CLI: 0.0.22
- Spec Kit Template: 0.0.90
- Python: 3.14.0

## Журнал наблюдений

### 2025-12-02

#### Commit [1df37ca60d4eee8e12d9f9e16e9055d876966c7b](https://github.com/retverd/demo-spec-kit-with-cursor/commit/1df37ca60d4eee8e12d9f9e16e9055d876966c7b)

Инициализировал проект через `specify init`, все прошло без конфликтов или ошибок.

#### Commit [1cdb5c1731258ac35e053f4f1257d3dee7effbec](https://github.com/retverd/demo-spec-kit-with-cursor/commit/1cdb5c1731258ac35e053f4f1257d3dee7effbec)

Создал конституцию проекта через `specify constitution`, в отличие от последующих команд промпт не был сохранен. Конституция была сохранена на русском языке, однако в ней не было создано требования о том, что все документы и комментарии должны быть написаны на русском языке.

#### Commit [0d57dad06a299ba3888f1af38078976d4e0435e3](https://github.com/retverd/demo-spec-kit-with-cursor/commit/0d57dad06a299ba3888f1af38078976d4e0435e3)

К сожалению, на данном этапе не догадался сохранять результат работы каждой команды в отдельном коммите (как и вести журнал), так что все изменения были сделаны в одном коммите.

По итогу README.md был обновлен согласно созданному функционалу, был создан полный пакет документов, работающий код и тесты - модульные и интеграционные. Поскольку в конституцию проекта не попало требование вести все документы и комментарии на русском языке, всё на английском.

✅ Плюсы:

- пользовательские промпты сохранены в файлах [спецификаций](specs/001-cbr-exchange-rate/spec.md), смотри заголовок
- проведено исследование особенностей внешних зависимостей (сайта ЦБ РФ, формата Parquet), данных, аргументированно выбраны библиотеки. Результаты сохранены в файл [research.md](specs/001-cbr-exchange-rate/research.md);
- подготовлена [спецификация на изменение](specs/001-cbr-exchange-rate/spec.md), содержащая пользовательские истории, граничные условия, требования, допущения и запланированные результаты;
- детально описаны контракты взаимодействия с [API ЦБ РФ](specs/001-cbr-exchange-rate/contracts/cbr-api-contract.md) и [командной строкой](specs/001-cbr-exchange-rate/contracts/cli-contract.md);
- детально описана [модель данных](specs/001-cbr-exchange-rate/data-model.md) со всеми нюансами и способами валидации;
- подготовлены детальные [план реализации](specs/001-cbr-exchange-rate/plan.md), учитывающий конституцию проекта и содержащий описание структуры проекта, и [техническое задание](specs/001-cbr-exchange-rate/quickstart.md) с детальным описанием всех компонент, их реализации, тестов, наиболее распространенных проблем и полезных ресурсов;
- подготовлены тесты, сделана реализация, тесты запущены, по результатам внесены изменения в реализацию, в итоге вся реализация работает корректно, данные извлекаются и сохраняются. Код достаточно хорошо структурирован, содержит описания модулей и функций, комментарии в коде. Описания классов и функций сделаны по одному шаблону, что упрощает читаемость.

❌ Минусы:

- пользовательские промпты не сохранены в файлах [плана](specs/001-cbr-exchange-rate/spec.md), хотя они приводятся для указаний особенностей технической реализации;
- [спецификации](specs/001-cbr-exchange-rate/spec.md) остаются в состоянии Draft даже после проверки и реализации, на официальном сайте нет информации как и когда должен изменяться статус;
- в [зависимости](requirements.txt) прописаны и установлены не последние стабильные версии библиотек;
- во большинстве md-файлов линтер выдает сообщения об ошибках - в основном из-за того, что между списками и предыдущим текстом, а также после заголовков нет пустов строки;
- во многих py-файлах линтер выдает сообщения об ошибках, есть неиспользуемые импорты, переменные, к которым нет обращений;
- нет реального E2E теста, все [интеграционные тесты](tests/integration/test_end_to_end.py) на заглушках;
- недостаточно уровней асбстракции и изоляции, методы слишком заточены под текущие задачи без перспектив расширения. Например, спецификация [cbr-api-contract.md](specs/001-cbr-exchange-rate/contracts/cbr-api-contract.md) с одной стороны, в названии не содержит уточнения, что это про сбор курсов валют, с другой стороны, в неё изначально вшит курс доллара к рублю, хотя курсов доступно великое множество и логичнее не конкретный курс указывать в контракте, а сделать общий контракт для конкретного сервиса, а валюты указывать при его использовании. Соответственно, в реализации детали тоже сразу вшиты. Реализация сохрания данных в parquet [parquet_writer.py](src/services/parquet_writer.py) названа логично, но слишком завязана на конкретную реализацию, при потребности использовать его для сохранения других данных придется полностью переписывать.

### 2025-12-04

#### Commit [31e05c80286a529b6d9324ae001caf51e1ea3cd4](https://github.com/retverd/demo-spec-kit-with-cursor/commit/31e05c80286a529b6d9324ae001caf51e1ea3cd4)

Обновил [конституцию проекта](.specify/memory/constitution.md) командой `/speckit.constitution`, указал, что для удобства работы команды все спецификации проекта и все комментарии в коде должны быть на русском языке.

Были внесены следующие изменения:

- обновлены метаданные конституции, а также указана причина изменения;
- добавлен новый принцип;
- обновлены все шаблоны документов.

При этом сами шаблоны переведеные не были.

#### Commit [3070147217ea2c01f299b0ca5e1dd543ff5260fa](https://github.com/retverd/demo-spec-kit-with-cursor/commit/3070147217ea2c01f299b0ca5e1dd543ff5260fa)

Добавлен GitHub workflow для использования линтера при push'е изменений. Запуск линтера сразу выявил множество проблем: Your code has been rated at 5.38/10.

#### Commit [6137bce6fed314c9175397823aaeabf1cd0e3dd3](https://github.com/retverd/demo-spec-kit-with-cursor/commit/6137bce6fed314c9175397823aaeabf1cd0e3dd3)

Сгенерирована [спецификация](specs/002-moscow-exchange-candles/spec.md) для второго изменения командой `/speckit.specify`. При генерации был предложен временной интервал в последние 30 дней, я попросил взять 7 последних дней по аналогии с существующим функционалом, модель об этом не догадалась. Изменение разбито на два пользовательских сценария, которые на самом деле являются частью одного. Сформирован реестр граничных условий и негативных сценариев, на часть прописана реакция по аналогии с существующим функионалом. Сформированы функциональные требования, описаны ключевые сущности, предположения и приемочные критерии.

> [!WARNING]
> Несмотря на явное указание в конституции проекта, а также в [шаблоне спецификации](.specify\templates\spec-template.md), значительная часть текста сгенерирована по-прежнему на английском

Сформирован файл [requirements.md](specs/002-moscow-exchange-candles/checklists/requirements.md), в котором перечислены все требования и проставлен их статус после окончания генерации. Все требования выполнены.

> [!WARNING]
> Файл полностью на английском!

#### Commit [79847e6e54f87347f7346ff902e81bfd9e89a760](https://github.com/retverd/demo-spec-kit-with-cursor/commit/79847e6e54f87347f7346ff902e81bfd9e89a760)

На основе спецификации сформирован [план реализации](specs/002-moscow-exchange-candles/plan.md) функционала командой `/speckit.plan`. Включает в себя:

- метаданные: когда создан, ссылка на спецификацию;
- технический контекст: версию Python и список библиотек;
- результаты сверки с конституцией проекта;
- структуру проекта: существующие и запланированные модули;
- высокоуровневый дизайн: детальный список модулей с нюансами реализации;
- стратегия тестирования: E2E и unit-тесты;
- фазы реализации: что в каком порядке делать.

> [!WARNING]
> По-прежнему все тесты на заглушках, нет тестов с реальным API! Хотя одно из требований содержит ограничение по времени получения ответа от API.

#### Commit [8ae6ec70432b3745f8db4954ead8530fe0836c52](https://github.com/retverd/demo-spec-kit-with-cursor/commit/8ae6ec70432b3745f8db4954ead8530fe0836c52)

На основе плана сформирован список [задач для выполнения](specs/002-moscow-exchange-candles/tasks.md) и тестов, всё на русском. Используются фазы с предыдущего шага, часть задач маркирована как пригодных к одновременному выполнению для ускорения процесса.

> [!NOTE]
> Не знаю, как проверить одновременность выполнения задач, агент выполняет всё в одном окне как будто бы последовательно. Список задач не содержит даты создания.

### 2025-12-06

#### Commit [8cbe43472297f719fa50f2beaf7ab6dcf41631a3](https://github.com/retverd/demo-spec-kit-with-cursor/commit/8cbe43472297f719fa50f2beaf7ab6dcf41631a3)

Командой `/speckit.analyze` проведен анализ подготовленных документов, по возникшим вопросам внесены следующие изменения:

- убраны метаданные для XLSX-файла, решил ограничиться записью в имя файла интервала времени и даты формирования отчета;
- указаны детали обработки оставшихся негативных сценариев;
- добавлены требования по локализации, вытекающие из конституции проекта;
- добавлен тест на проверку времени выполнения сценария.

#### Commit [5f60c112aff2ff0f72d6c6d18f5108bf218bd401](https://github.com/retverd/demo-spec-kit-with-cursor/commit/5f60c112aff2ff0f72d6c6d18f5108bf218bd401)

Командой `/speckit.implement` проведено [исследование](specs/002-moscow-exchange-candles/research.md) API перед реализацией. Документация дополнена описаниями [контрактов](specs/002-moscow-exchange-candles/contracts/) и [модели данных](specs/002-moscow-exchange-candles/data-model.md). Подготовлено [краткое описание](specs/002-moscow-exchange-candles/quickstart.md) использования изменения.

Реализовано изменение по спецификации:

- Создана [модель данных](src/models/candles.py) `CandleRecord` для представления дневных свеч OHLCV;
- Разработан [класс](src/services/moex_client.py) `MoexClient` для получения ежедневных свечей через ISS API, включены проверка данных и обработчики ошибок;
- Разработан [класс](src/services/xlsx_writer.py) для сохранения данных по свечам в формате XLSX, имя файла формируется по указанному шаблону;
- Дополнены вспомогательные функции;
- Подготовлены модульные и интеграционные тесты.

> [!WARNING]
>
> - Тесты для первого изменения `001-cbr-exchange-rate` были сломаны и не исправлены;
> - Так и не был сделан интеграционный тест на взаимодействие с реальной платформой;
> - Несмотря на то, что тесты были созданы и успешно пройдены, функционал сохранения данных в файл не сработал, ошибок в консоли тоже не видно;
> - Тесты не изолированы, хотя изменения реализуют не связанный функционал. Было бы удобнее иметь возможность хотя бы запускать тесты для разного функционала независимо, будь то разделение по папкам/файлам или при помощи метеданных;
> - В соответствии со спецификацией реализация слишком слеплена, нехватает изоляции для дополнения в будущем: например, не запись в XLSX, как и ранее в parquet, тесно связана со структурой конкретного набора данных, хотя можно было бы делать через Pandas Dataframe, как более универсальное решение;
> - Часть импортов не используется.
> - Странный подход: вызываются последовательно сначала logger.error, затем print(f"Error: {error_message}", file=sys.stderr), хотя логичнее было бы инициировать логгер с выводом в разные потоки: файл журнала и в sys.stderr.

<!-- -->

> [!CAUTION]
> По завершении работы модель выдала сообщение **Next steps: Complete Phase 6 tasks (README/quickstart sync, log/message audit, perf benchmark).**, на что я не обратил внимание, вследствие этого указанная часть задач не была выполнена.

### 2025-12-07

#### Commit [220520b664bcc33e03d4e1c01fb93a92d7b025d0](https://github.com/retverd/demo-spec-kit-with-cursor/commit/220520b664bcc33e03d4e1c01fb93a92d7b025d0)

Вручную добавил пустые строки после заголовков и вокруг список. Запросил проверку качества имплементации кода согласно [конституции проекта](.specify/memory/constitution.md). По итогам проверки были:

- переведены новые докстринги на русский: src/services/moex_client.py, src/models/candles.py, src/services/xlsx_writer.py;
- ужесточена проверка boardid в MoexClient: теперь колонка обязательна, валидируется, и нет молчаливой подстановки;
- успешно проведены все 58 тестов!
- предложено локализовать оставшиеся английские докстринги/комментарии в других новых файлах.

> [!NOTE]
> Как выяснилось позже, именно ужесточение проверки boardid в MoexClient сломало функционал загрузки свечей, так как API не отдает boardid :)

#### Commit [ca8f5993b7612dfd388cea8eebcd79262950e6ea](https://github.com/retverd/demo-spec-kit-with-cursor/commit/ca8f5993b7612dfd388cea8eebcd79262950e6ea)

Запросил локализовать оставшиеся английские докстринги/комментарии во всех файлах папок src и tests, в итоге:

- Переведены комментарии и строки документации на русский язык в `main.py`, `candles.py`, `exchange_rate.py`, `cbr_client.py`, `moex_client.py`, `parquet_writer.py`, `xlsx_writer.py`, `date_utils.py`, и `validators.py`.
- Обновлены сообщения логирования и ошибки для лучшего понимания пользователями.
- Уточнены атрибуты и описание моделей данных для `CandleRecord` и `ExchangeRateRecord` на русском языке.
- Обновлены тесты для проверки корректности работы с локализованными сообщениями.

> [!NOTE]
> Побочный эффект - сообщение коммита теперь на русском. Посмотрим, насколько его хватит.

### 2025-12-08

#### Commit [6e1a5c378629ddff6226274b41bdc7c63d5fe995](https://github.com/retverd/demo-spec-kit-with-cursor/commit/6e1a5c378629ddff6226274b41bdc7c63d5fe995)

Починил сбор данных с МосБиржи: "При ошибках MoexClient не выдает сообщения в консоль, а молча заканчивает работу, что не позволяет идентифицировать проблему.":

- В src/cli/main.py при ошибках MoexClient теперь печатается сообщение в stderr перед возвратом кода выхода.
- Добавлен безопасный разбор аргументов: при вызове из тестов или без явных аргументов игнорируются pytest-пути, а при реальном вызове из CLI используется переданный argv (или sys.argv[1:]).
- Регрессия: pytest tests/integration/test_end_to_end.py tests/unit/test_moex_client.py — все 11 тестов проходят.

Теперь при сбоях MoexClient пользователь увидит причину в консоли, а тесты/CLI работают штатно.

> [!NOTE]
> Непонятно, откуда взялся безопасный разбор документов, этого я не просил.

<!-- -->

> [!CAUTION]
> Крайне странное исправление в [moex_client.py](src\services\moex_client.py) довольно спорного изначально решения, линтеры для проверки кода не прогонялись:

```python
    board = (
        row[col_index["boardid"]]
        if "boardid" in col_index
        else self.EXPECTED_BOARD
    )

    record = CandleRecord(
        date=day,
        open=parse_float(row[col_index["open"]]),
        high=parse_float(row[col_index["high"]]),
        low=parse_float(row[col_index["low"]]),
        close=parse_float(row[col_index["close"]]),
        volume=parse_float(row[col_index["volume"]]),
        instrument=self.INSTRUMENT,
        board=self.EXPECTED_BOARD,
    )
    records_by_date[day] = record
```

Явно нужно пройтись линтером по всем файлам и исправить ошибки.

> [!INFO]
> Генератор commit messages продолжает писать на русском, чудеса.

### 2025-12-10

#### Commit [f2c9cdb083be8db860424f33fa95a955363148cf](https://github.com/retverd/demo-spec-kit-with-cursor/commit/f2c9cdb083be8db860424f33fa95a955363148cf)

Добавил ссылки на коммиты

#### Commit [777fc81dbc6dc83411597888f6593d1c1774863b](https://github.com/retverd/demo-spec-kit-with-cursor/commit/777fc81dbc6dc83411597888f6593d1c1774863b)

Выполни Фазу 6 [tasks.md](specs/002-moscow-exchange-candles/tasks.md):

> Oбновил документацию, усилил русскоязычные ошибки/валидацию и добавил перф‑тест для moex-lqdt.
>
> - Готово по Фазе 6: документация обновлена, клиент/тесты доработаны, но полный прогон pytest не выполнен (в окружении нет установленного pytest).
>
> Изменения:
>
> - README дополнен сценарием moex-lqdt, общими кодами выхода и структурой проекта под обе подкоманды (CBR и MOEX).
> - Quickstart для LQDT/TQTF синхронизирован с фактическим поведением CLI и кодами выхода (specs/002-moscow-exchange-candles/quickstart.md).
> - MOEX-клиент усилил валидацию и логирование: требуем колонку boardid, проверяем соответствие TQTF, логируем некорректные данные/значения перед выбросом ошибок, фиксируем объём полученных записей.

<!-- -->

> [!WARNING]
>
> - Часть комментариев по-прежнему на английском;
> - Не смог запустить `python -m pytest`, хотя я запустил и `python -m pytest`, и `pytest`, оба раза запустился успешно.
> - Тест производительности выполнен на заглушках, что не имеет смысла.
> - Неконсистентность названий: то MOEX, то Мосбиржа. То CBR, то ЦБ РФ.

#### Commit [3053de4b90a549c85f84e2bcdc06d3d6efaa69de](https://github.com/retverd/demo-spec-kit-with-cursor/commit/3053de4b90a549c85f84e2bcdc06d3d6efaa69de)

/speckit.constitution расширь принципы тестирования следующим образом:

- хотя бы часть интеграционных тестов должна быть на взаимодействие с реальной системой, особенно тесты на производительность;
- должна быть возможность тестировать разные компоненты независимо друг от друга, если их функционал не пересекается.

> - Обновил принцип тестирования: обязательная часть интеграционных тестов теперь должна идти против реальных систем (особенно для перфоманс-проверок), а независимые компоненты требуют самостоятельных тестовых наборов без скрытых связей. 75:77:.specify/memory/constitution.md
> - Версию конституции поднял до 1.2.0 с датой 2025-12-10; добавлен Sync Impact Report. 14:18:.specify/memory/constitution.md
> - Синхронизировал шаблоны: в планах добавлены ворота про реальные интеграционные тесты и независимость компонентов, в спецификациях — напоминание про реальные интеграционные/перф-сценарии, в задачах — требование включать такие прогоны при необходимости. 32:38:.specify/templates/plan-template.md 8:12:.specify/templates/spec-template.md 13:15:.specify/templates/tasks-template.md

<!-- -->

> [!CAUTION]
> Странный вывод - внесенное правило требует перестроения всех тестов, которое не было сделано.
> Два последних запроса запускал дважды для проверки, модель GPT-5.1 Codex Max, результаты разные. В первом варианте были более детальные правки и более лаконичное описание.

<!-- -->

> [!WARNING]
> После обновления шаблонов [plan-template.md](.specify\templates\plan-template.md), [spec-template.md](.specify\templates\spec-template.md) и [tasks-template.md](.specify\templates\tasks-template.md) они содержат инструкции как раз русском, так и на английском языке.

#### Commit [caa4fe3b4cd6165570f7a91ef3e7b3afb7d2e014](https://github.com/retverd/demo-spec-kit-with-cursor/commit/caa4fe3b4cd6165570f7a91ef3e7b3afb7d2e014)

Приступим к исправлению проблем проектирования функционала в первых двух изменениях:

/speckit.specify Для команд cbr и moex-lqdt в [main.py](src/cli/main.py) сделай обязательную передачу длительности интервала времени в днях. Окончание периода - также сегодняшний день.

> - Создана ветка 001-require-interval-days и сгенерирован спек specs/001-require-interval-days/spec.md с пользовательскими историями, крайними случаями, функциональными требованиями и измеримыми критериями успеха (обязательный параметр дней, конец периода — сегодня).
> - Чеклист качества заполнен и пройден: specs/001-require-interval-days/checklists/requirements.md (без NEEDS CLARIFICATION).
> - Готово к следующему шагу: можно запускать /speckit.plan или уточнения не требуются.

<!-- -->

> [!WARNING]
> Некорректный префикс для ветки: первое изменение уже было, непонятно, откуда опять 001...

Подготовлена [спецификация](specs/001-require-interval-days/spec.md), целиком на русском языке. Для разных команд почему-то разный приоритет, хотя явного разделения не было сделано, они по замыслу равнозначны. Возможно дело в том, что курсы валют с ЦБ РФ являются сценарием по умолчанию.
Почему-то сделано предположение, что максимальное количество извлекаемых дней - 30, надо будет уточнить верхний предел на дальшейших шагах.

> [!WARNING]
> В тестах для MOEX неверное предположение о наборе колонок, возвращаемых для свечей, надо будет дать ему сравнение с реальным ответом API для корректирровки.

### 2025-12-11

#### Commit [74bd77c05fa9177f9103a3e83df64e7c7630e33a](https://github.com/retverd/demo-spec-kit-with-cursor/commit/74bd77c05fa9177f9103a3e83df64e7c7630e33a)

Проверяю корректность требований командой /speckit.clarify:

> Asking max days range:
>
> - A Enforce 1–30 days (inclusive)
> - B Enforce 1–60 days (inclusive)
> - C Enforce 1–365 days (inclusive)
> - D Minimum 1, no explicit max (warn on large)
> - Short Provide a different short answer (<=5 words)
>
> C
>
> Принял Option C: диапазон days — 1–365. Спецификация обновлена [spec.md](specs/001-require-interval-days/spec.md) для верхней границы, FR-003 и SC-001/002/004. Weitere Wünsche?

<!-- -->

> [!WARNING]
> Почему-то уточнение на немецком!

#### Commit [eda212c3ee67f58e7f2eb47fc3cb907aac7e5aad](https://github.com/retverd/demo-spec-kit-with-cursor/commit/eda212c3ee67f58e7f2eb47fc3cb907aac7e5aad)

Составляем план работ с /specit.plan

> План и артефакты готовы.
>
> - План обновлён с конкретным контекстом и gate-статусами: [plan.md](specs/001-require-interval-days/plan.md).
> - Проведено исследование и зафиксированы решения (диапазон 1–365, предвалидация, расчёт периода, коды выхода): [research.md](specs/001-require-interval-days/research.md).
> - Описана модель данных для days/периода и артефактов: [data-model.md](specs/001-require-interval-days/data-model.md).
> - Контракт CLI с обязательным --days и поведением для обеих подкоманд: [cli-contract.md](specs/001-require-interval-days/contracts/cli-contract.md).
> - Quickstart с примерами запуска и кодами выхода: [quickstart.md](specs/001-require-interval-days/quickstart.md).
> - Агентный контекст обновлён через [update-agent-context.ps1](.specify/scripts/powershell/update-agent-context.ps1) -AgentType cursor-agent.
>
> Состояние: все NEEDS CLARIFICATION закрыты, Constitution Check после дизайна — PASS.

<!-- -->

> [!WARNING]
> В [plan.md](specs/001-require-interval-days/plan.md) зачем-то добавлено условие времени проведения валидации: "Валидация `--days` и расчёт периода ≤50 мс", убрал.
> Несмотря на явные требования к русскому языку, документы частично формируются на английском.

<!-- -->

> [!INFO]
> В [plan.md](specs/001-require-interval-days/plan.md) учтены новые требования по тестированию (интеграционные тесты с реальными системами и автономное тестирование независимых компонент), однако в более ранние планы и спецификации изменения не внесены.

#### Commit [8ec14c5d9261c82081bb41b81a05b3019ca6ef1b](https://github.com/retverd/demo-spec-kit-with-cursor/commit/8ec14c5d9261c82081bb41b81a05b3019ca6ef1b)

Составляем список задач с /specit.tasks:

> Created [tasks.md](specs/001-require-interval-days/tasks.md) with dependency-ordered, story-grouped checklist tasks.
>
> - Total tasks: 21
> - By story: US1=5, US2=4, US3=4 (Setup=2, Foundational=4, Polish=2)
> - Parallel opportunities: highlighted per phase (e.g., Foundational T004/T006; US1 T007/T008/T009/T010; US2 T012/T013/T014; US3 T016/T017, then T018/T019).
> - Independent test criteria: included under each story (US1 cbr success with --days; US2 moex-lqdt success with --days; US3 invalid/absent --days returns code 5, no files).
> - MVP scope: User Story 1 (CBR with required --days).
> - Format check: all tasks follow - [ ] T### [P?] [US?] Description with file path.

<!-- -->

> [!WARNING]
>
> - Все задачи описаны корректно, хоть и достаточно многословно.
> - Есть реализация требования тестирования пользовательских историй независимо друг от друга, однако нет реализации требования проведения интеграционных тестов с реальной системой.

#### Commit [](https://github.com/retverd/demo-spec-kit-with-cursor/commit/)

Проведен анализ всех артефактов, покрытия требований и соответствия документов, внесены исправления, в целом закрывающие все возникшие ранее вопросы.

> Specification Analysis Report
>
> - **C1 Constitution CRITICAL Нет явных задач на интеграционные/перф проверки против реальных CBR/MOEX, что нарушает требование Принципа 3 и напоминание спеки о реальных интеграциях**.
> - Добавить отдельные задачи на прогон CLI против реальных API CBR/MOEX (в т.ч. перф/пропускная способность) и фиксировать результаты.
> - **G1 Coverage Gap HIGH Требование «сохранить текущие бизнес-потоки без регрессий» не покрыто задачами: нет отдельной проверки, что прежние форматы/функции не затронуты.**
> - Добавить задачу на регрессионный прогон существующих сценариев/данных для обеих команд (unit/integration) после внедрения --days.
> - **G2 Coverage Gap MEDIUM Граничные кейсы 365 дней/високосный год указаны в спека/SC-004, но нет явных тестовых задач на эти границы.**
> - Расширить тестовые задачи (unit+integration) на --days 365 и дату смены месяца/високосный день.
> - **U1 Unmapped Task LOW T001 (фиксация зависимостей) не связан с конкретным требованием; может быть инфраструктурой, но цель не отражена в спека/плане.**
> - Уточнить, нужен ли отдельный трек зависимости: либо связать с требованиями воспроизводимости, либо переместить в общий backlog.
>
> -------------------------
>
> - Обновил [tasks.md](specs/001-require-interval-days/tasks.md):
>   - Добавил T025 для юнит-тестов граничных случаев (--days 365, смена месяца/високосный день) в [test_date_utils.py](tests/unit/test_date_utils.py) и [test_cli_main.py](tests/unit/test_cli_main.py);
>   - Добавил Phase 6 для требований конституции по реальным интеграциям и регрессии: T022 (реальный прогон CBR), T023 (реальный прогон MOEX), T024 (регрессионная проверка существующих форматов/кодовых путей после обязательного --days);
> - В [plan.md](specs/001-require-interval-days/plan.md) добавил примечание в Testing о Phase 6 (реальные прогоны CBR/MOEX T022/T023, регрессия форматов T024, граничные кейсы T025) и отметку в Constitution Check про Phase 6;
> - В [spec.md](specs/001-require-interval-days/spec.md) в Edge Cases указал покрытие граничных расчётов T025 и реальные прогоны/регрессию через T022–T024;
> - Success criteria обновлены в [spec.md](specs/001-require-interval-days/spec.md):
>   - SC-004 расширен на смену месяца/високосный год;
>   - Добавлены SC-005 (реальные прогоны CBR/MOEX с фиксацией времени отклика/пропускной способности) и SC-006 (регрессия форматов/имен файлов после обязательного --days).
