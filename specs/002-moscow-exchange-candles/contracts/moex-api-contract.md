# Контракт ISS‑API Мосбиржи для дневных свечей LQDT/TQTF

## Эндпоинт

- Метод: `GET`
- URL: `https://iss.moex.com/iss/engines/stock/markets/shares/boards/TQTF/securities/LQDT/candles.json`
- Параметры запроса:
  - `from` — дата начала периода (`YYYY-MM-DD`)
  - `till` — дата конца периода (`YYYY-MM-DD`)
  - `interval=24` — дневные свечи

## Успешный ответ (пример)

```json
{
  "candles": {
    "columns": [
      "open", "close", "high", "low", "value", "volume", "begin", "end", "boardid"
    ],
    "data": [
      [1125.0, 1130.5, 1135.0, 1120.0, 1500000.0, 1200.0, "2025-11-28 10:00:00", "2025-11-28 18:45:00", "TQTF"],
      [1130.0, 1128.0, 1136.0, 1125.0, 1700000.0, 1400.0, "2025-12-01 10:00:00", "2025-12-01 18:45:00", "TQTF"]
    ]
  }
}
```

### Требуемые колонки

- `open`, `high`, `low`, `close`, `volume`, `begin`
- `boardid` — ожидаем `TQTF`
- Отсутствие любой из обязательных колонок трактуется как ошибка данных.

## Ошибочные ответы

- HTTP 4xx/5xx — содержат статус; клиент должен пробрасывать осмысленную ошибку.
- Сетевые таймауты/ошибки подключения — должны классифицироваться отдельно.
- Некорректный JSON или отсутствие секции `candles` — ошибка данных API.

## Бизнес‑правила обработки

1. Запрашиваем интервал `from..till` (7 дней) и `interval=24`.
2. Формируем ровно одну запись на каждую дату периода:
   - При наличии данных — берём `open/high/low/close/volume` из ответа.
   - При отсутствии данных на дату — создаём запись с `None` в числовых полях.
3. Значения цен и объёма должны быть неотрицательными, допускаются `None`.
4. При несоответствии `boardid` ожиданию `TQTF` считаем ответ некорректным.
